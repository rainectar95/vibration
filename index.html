<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style>
    button{
        padding: 4rem;
        font-size: 24px;
    }
</style>
<body>
    <button onclick="vibrateEnhanced()">Click to Vibrate</button>

<script>
    function vibrateEnhanced() {
        // Method 1: Standard Vibration API
        if ('vibrate' in navigator) {
            navigator.vibrate([5, 400, 10]);
            return;
        }

        // Method 2: Webkit Vibration
        if ('webkitVibrate' in navigator) {
            navigator.webkitVibrate(500);
            return;
        }

        // Method 3: Using window.performance
        if (window.performance && window.performance.now) {
            const start = performance.now();
            while (performance.now() - start < 500) {
                // Intensive operation to trigger haptic
            }
            return;
        }

        // Method 4: Using AudioContext with different frequencies
        try {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = context.createOscillator();
            const gainNode = context.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(context.destination);
            
            // Set frequency to create more noticeable vibration effect
            oscillator.frequency.value = 1;
            gainNode.gain.value = 1;
            
            oscillator.start(context.currentTime);
            oscillator.stop(context.currentTime + 0.2);
            return;
        } catch (e) {
            console.log('AudioContext vibration failed');
        }

        // Method 5: Using Impact Feedback (iOS 13+)
        try {
            const impactFeedbackHeavy = window.impactHeavy || window.Haptics;
            if (impactFeedbackHeavy) {
                impactFeedbackHeavy.impactOccurred();
                return;
            }
        } catch (e) {
            console.log('Impact feedback not supported');
        }

        // Final fallback: alert user if nothing works
        console.log('Vibration not supported on this device');
    }

    // Optional: Add touch event listener for better iOS response
    document.addEventListener('touchstart', function() {
        // Pre-initialize AudioContext on touch
        const context = new (window.AudioContext || window.webkitAudioContext)();
        context.resume().then(() => console.log('AudioContext initialized'));
    });
</script>
</body>
</html>
